{"version":3,"file":"js/877-legacy.c8df1206.js","mappings":"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","sources":["webpack://book-information-system/./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack://book-information-system/./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack://book-information-system/./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack://book-information-system/./src/views/HomeView/BookInfoBlock.vue?2719","webpack://book-information-system/./src/views/HomeView/BookInfoBlock.vue","webpack://book-information-system/./src/views/HomeView/index.vue?ec96","webpack://book-information-system/./src/views/HomeView/index.vue"],"sourcesContent":["var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fb650702\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"book_info_block_root\" }\nconst _hoisted_2 = { class: \"img_wrap\" }\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = { class: \"info_wrap\" }\nconst _hoisted_5 = { class: \"title\" }\nconst _hoisted_6 = { class: \"author\" }\n\n\nexport default /*#__PURE__*/_defineComponent({\n  props: {\n  title: {\n    type: String,\n    required: true\n  },\n  author: {\n    type: String,\n    required: true\n  },\n  imgUrl: {\n    type: String,\n    required: true\n  }\n},\n  setup(__props) {\n\nconst props = __props\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"img\", {\n        class: \"img\",\n        src: props.imgUrl\n      }, null, 8, _hoisted_3)\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", _hoisted_5, _toDisplayString(props.title), 1),\n      _createElementVNode(\"div\", _hoisted_6, _toDisplayString(props.author), 1)\n    ])\n  ]))\n}\n}\n\n})","import script from \"./BookInfoBlock.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BookInfoBlock.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./BookInfoBlock.vue?vue&type=style&index=0&id=fb650702&lang=sass&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/book-information-system/book-information-system/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fb650702\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, withCtx as _withCtx, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-23b495bf\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"home_view_root\" }\nconst _hoisted_2 = { class: \"main\" }\n\n\nimport * as TempRouter from '@/router'\n// 額外設置 name 屬性供 keep-alive 識別\n// setup-SFC 目前無法自動捕捉 fileName 來設定 name 屬性\n// ref issue: https://github.com/vuejs/core/issues/4993\nconst __default__ = {\n  name: TempRouter.RouterNameEnum.homeView\n}\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { RouterNameEnum } from '@/router'\nimport * as api from '@/api/books'\n\nimport BaseHeader from '@/components/BaseHeader.vue'\nimport BookInfoBlock from './BookInfoBlock.vue'\nimport UpdateBook from '@/components/UpdateBook.vue'\n\nimport useBooksInfo from './composables/useBooksInfo'\n\nimport type { BookInfo } from '@/api/books'\n\nexport default /*#__PURE__*/_defineComponent({\n  ...__default__,\n  setup(__props) {\n\nconst imgUrl = 'https://picsum.photos/800/600'\n\nconst { pageSetting, bookInfoGroup, getBooksInfo, initBooksInfo } = useBooksInfo()\n\nconst router = useRouter()\nconst routeToBookDetail = (bookInfoId: string) => {\n  const targetId = getBookId(bookInfoId as string)\n  router.push({ name: RouterNameEnum.detailView, params: { id: targetId } })\n}\n\nconst getBookId = (bookInfoId: string) => {\n  const targetId = bookInfoId.split('/')[2]\n  return targetId\n}\n\nconst handleBookInfoCreate = async (createObj: BookInfo) => {\n  const { data } = await api.createBookDetail(createObj)\n  initBooksInfo()\n  routeToBookDetail(data['@id'] as string)\n}\n\n// TODO: 做個載入動畫\nlet isLoading = ref<boolean>(false)\nconst handleScrollEvent = async () => {\n  // 需阻擋載入中狀態, 否則會多次觸發 callback fn\n  if (isLoading.value) return\n  // 若已載完所有資料則移除事件註冊\n  if (!pageSetting.value.hasNextPage) {\n    window.removeEventListener('scroll', handleScrollEvent)\n  }\n\n  // 滾動過的距離\n  const { scrollY } = window\n  // 螢幕高度\n  const screenHeight = window.screen.height\n  // 頁面總高度\n  const pageTotalHeight = document.body.scrollHeight\n  // 若滾動過的距離 + 螢幕高度 >= 頁面總高度, 則視同觸及底部\n  const isCloseBottom = scrollY + screenHeight >= pageTotalHeight\n  if (isCloseBottom) {\n    isLoading.value = true\n    await getBooksInfo()\n    isLoading.value = false\n  }\n}\nwindow.addEventListener('scroll', handleScrollEvent)\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(BaseHeader, { title: \"The book shelf\" }, {\n      right: _withCtx(() => [\n        _createVNode(UpdateBook, {\n          \"button-text\": \"Create\",\n          \"onCreate:bookInfo\": handleBookInfoCreate\n        })\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"main\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(bookInfoGroup), (bookInfo) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"block_wrap\",\n          key: bookInfo.isbn\n        }, [\n          _createVNode(BookInfoBlock, {\n            title: bookInfo.title,\n            author: bookInfo.author,\n            \"img-url\": imgUrl,\n            onClick: ($event: any) => (routeToBookDetail(bookInfo.id))\n          }, null, 8, [\"title\", \"author\", \"onClick\"])\n        ]))\n      }), 128))\n    ])\n  ]))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=23b495bf&lang=sass&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/book-information-system/book-information-system/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-23b495bf\"]])\n\nexport default __exports__"],"names":["$","fails","toIndexedObject","nativeGetOwnPropertyDescriptor","DESCRIPTORS","FAILS_ON_PRIMITIVES","FORCED","target","stat","forced","sham","getOwnPropertyDescriptor","it","key","ownKeys","getOwnPropertyDescriptorModule","createProperty","getOwnPropertyDescriptors","object","descriptor","O","f","keys","result","index","length","undefined","enumerableOnly","Object","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread2","i","arguments","source","forEach","defineProperty","defineProperties","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_defineComponent","props","title","type","String","required","author","imgUrl","setup","__props","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","src","_toDisplayString","__exports__","__default__","name","TempRouter","useBooksInfo","pageSetting","bookInfoGroup","getBooksInfo","initBooksInfo","router","useRouter","routeToBookDetail","bookInfoId","targetId","getBookId","RouterNameEnum","params","id","split","handleBookInfoCreate","createObj","api","data","isLoading","ref","handleScrollEvent","value","hasNextPage","window","removeEventListener","scrollY","screenHeight","screen","height","pageTotalHeight","document","body","scrollHeight","isCloseBottom","addEventListener","_createVNode","BaseHeader","right","_withCtx","UpdateBook","_","_Fragment","_renderList","_unref","bookInfo","isbn","BookInfoBlock","onClick","$event"],"sourceRoot":""}